<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="assets/style/main.css">
	<title>Extracting from USGS CSV Files</title>
</head>
<body>

	<!-- START HERE -->
	<div class="banner">
		<img src="assets/icons/amnh-logo.png" class="amnh-logo"/>
		<a href="toc.html">
			<img src="assets/icons/toc.svg"/ class="toc"/>
		</a>

	</div>


	<a class="forward" href="session5_4.html">
		<img src="assets/icons/forward.svg" width="50px"/>
	</a>

	<a class="backward" href="session5_2.html">
		<img src="assets/icons/backward.svg" width="50px"/>
	</a>
	<!-- END HERE -->

	<div class="content">
		<h2>Session 5, #4:  Extracting from USGS CSV Files</h2>
		<hr>


		<p>
		Often, there's more than a single number or color on the lines of a file.  The USGS file contains all the information about each earthquake observation in a single line:

		<p>
		The first line of the file says what each part represents:
		<p>
		<tt>time,latitude,longitude,depth,mag,magType,nst,gap,dmin,rms,net,id,updated,place,type,horizontalError,depthError,magError,magNst,status,locationSource,magSource
		</tt></p>

		<p>The first part of the line (up to the first comma) is the date and time the earthquake was observed.  Next, separated by more commas, is the latitude and longitude and then additional information about the
		earthquake observation.

		<p class= challenge><br><b>Challenge:</b> What is the latitude and longitude in the line:<br>
		<tt>'2017-01-17T11:48:48.530Z,5.4319,94.6079,54.55,5.6,mb,,67,2.338,1,us,us10007tps,2017-01-17T12:14:46.732Z,"80km W of Banda Aceh, Indonesia",earthquake,7.4,5.8,0.045,173,reviewed,us,us'
		</tt>
		</p>

		<p>Did you find it?  In every line, it's the numbers after the first and second commas:

		<br><br><tt>
	'2017-01-17T11:48:48.530Z,<span style="color:red">5.4319,94.6079</span>,54.55,5.6,mb,,67,2.338,1,us,us10007tps,2017-01-17T12:14:46.732Z,"80km W of Banda Aceh, Indonesia",earthquake,7.4,5.8,0.045,173,reviewed,us,us'
		</tt>
		</p>

		<p>Let's have Python to extract those numbers for us.  Here's the steps we need to follow:
		<ol>
			<li> For each line, <tt>lineOfData</tt>
			<li> Split the <tt>lineOfData</tt> into pieces
			<li> Convert the piece after the first comma into a number and store in <tt>latitude</tt>
			<li> Convert the piece after the second comma into a number and store in <tt>longitude</tt>
		</ol>

		<p>
		We have done each part of this before.  Let's test this part, and then we'll move on to plotting the locations we have extracted from the file:

		<iframe src="https://trinket.io/embed/python/e71d7cecf6" width="100%" height="600" frameborder="0" marginwidth="0" marginheight="0" allowfullscreen></iframe>

		<p class="challenge"><br><br><b>Challenges:</b>
		Try the other files that are pre-loaded into the trinket.  How are they different?
		<br>
		<br>
		</p>

		<p class=challenge><br><br><b>Challenge:</b> Examine the format of the input data to figure out which column stores the magnitude of the observed earthquake.  Print the magnitude for each occurrence.
		<br>
		</p>

	</div>
</body>
</html>
