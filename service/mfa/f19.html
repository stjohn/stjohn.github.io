<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  	<title>@MfA: Python in the City</title>
    <link type="text/css" rel="stylesheet" href="../../lehman.css" />
  <style type="text/css">
  	li {
  		  padding-bottom:	10px ;
  }
  </style>
</head>
<body>

<div>
<div style =  "float:right">
<a href="https://www.mathforamerica.org">
<img style =  "height:60" src="mfaLogo.png"></a>
</div>


<h1>MfA Workshop: Python in the City<h1>
<h3>
<a href="https://stjohn.github.io">Katherine St. John</a><br>
<a href="https://www.mathforamerica.org/pdcatalog">Fall 2019</a></h3>

<p><i>What's the noisiest street in the city?  And which streets have the most collisions?  What trees are most commonly planted in the streets in your neighborhood?  What parts of the city are above the 100-year flood level?   We will explore these and related questions using Python and publicly available data about New York City.  This mini-course is organized into three sessions, each focused on a challenge, that introduces intermediate programming concepts using the Python programming language and popular packages that allow the analysis of structured data and the visualization via graphs and HTML navigable maps.  The workshop, via the challenges and variations, provides a multitude of scalable projects for use in the classroom.

<p>
<b>Prerequisites:</b> Assumes basic knowledge of Python:  familiarity with basic variable types (integers, real numbers, characters, strings and lists), input/output, definite loops (for-loop), and decisions.</i>


</div>

<div>
<h2>Session 1: Elevation Maps (Arrays & Images)</h2>
<h3> Wednesday, 6 November 2019</h3>

<p><img src="floodMap.png" width = "50%">

<p>Our first challenge is to build a 'flood map' of New York City metro area.  We start by exploring what data is needed and how to present the information, and then introduce the numerical analysis package, numpy,  to store grids (2 dimensional arrays) of elevations of the region.  We then use loops and decisions to traverse the array and create an image reflecting waterways and flood regions of the metropolitan are.   We introduce red-green-blue color codes to construct our flood maps.  The session ends with variations on the theme of maps based on elevations, slicing (accessing subsections of arrays), and representing colors in hexadecimal codes.



<ul>
	<li> <b>Slides:</b> <a href="mfa20191106.pdf">Session 1</a>
	<li> <b>Concepts covered:</b>   creating and traversing 2-dimensional arrays, decisions, data representation of colors (red-green-blue codes and hexadecimal codes).
	<li> <b>Packages used:</b>  <a href="https://numpy.org">numpy</a>, <a href="https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.html">matplotlib.pyplot</a>, both part of the freely-distributed <a href="https://www.anaconda.com/distribution/">anaconda </a> release of Python.	
	<li> <b>Data used:</b>
		<ul>
			<li> <a href="">Elevation data</a> from US National Oceanic and Atmospheric Administration (NOAA) <br>
				(Save as text, and remove 5 lines of metadata at top of file before using).
			<li> Cleaned dataset of NYC:  <a href="../../teaching/csci127/f17/elevationsNYC.txt">elevationsNYC.txt</a>.
		</ul>
	<li> <b>References:</b>
		<ul>
			<li> The flood maps exercise is based on an on-line lab for our introductory programming course (scroll halfway down):  <a href="../../teaching/csci127/f19/lab3.html">Lab 3</a>.
			<li> It was inspired by a Nifty program on <a href="http://nifty.stanford.edu/2016/franke-mountain-paths/">mountain paths</a> by Baker Franke.
			<li>  A lovely <a href="http://www.nytimes.com/newsgraphics/2012/1120-sandy/survey-of-the-flooding-in-new-york-after-the-hurricane.html?mcubz=1">visualization</a> of Hurricane Sandy flooding by the New York Times.
		</ul>
</ul>

</div>

<div>
<h2>Session 2: Analyzing City Data (Structured data & File I/O)</h2>
<h3> Wednesday, 20 November 2019</h3>

<p><img src="../../teaching/csci127/f17/nycHist.png" width="50%">

<p>The focus for the second meeting is analyzing structured data.  We will start with opening spreadsheets (CSV files) and graphing the data (a la Excel).  The opening challenge is on historical population data of New York City and answering questions such as:  how has the population changed over time?   What fraction of the population lives in your borough?  As well as demonstrating some of the basic statistics that are included (e.g. minimum, mean, correlation).  We then look at some data sets from <a href="https://opendata.cityofnewyork.us">NYC OpenData</a>:  daily school attendance, homeless shelter populations, parking tickets and 311 data.  Our follow-up questions include:  what days have the highest attendance at your school?  what color cars get the most parking tickets in your neighborhood?  What is the most common 311 complaint?  


<ul>
	<li> <b>Slides:</b> <a href="mfa20191120.pdf">Session 2</a>
	<li> <b>Concepts covered:</b>   file I/O, list (series) manipulation, basic statistics, binning data.
	<li> <b>Packages used:</b>  <a href="https://pandas.pydata.org">pandas</a>, <a href="https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.html">matplotlib.pyplot</a>, both part of the freely-distributed <a href="https://www.anaconda.com/distribution/">anaconda </a> release of Python.	 <br>
	Optional:  <a href="https://seaborn.pydata.org">seaborn</a> for lovely statistical data visualization.
	<li> <b>Data used:</b>  New York City historical population (wiki) and several datasets from NYC OpenData:   daily attendance,  homeless shelter data, 311 calls, and parking tickets.
	
		<ul>
			<li> Historical Population of New York City:
				<ul>
					<li> Wiki:  <a href="https://en.wikipedia.org/wiki/Demographic_history_of_New_York_City">Demographic history of New York City</a>
					<li> Cleaned data:  <a href="../../teaching/csci127/f17/nycHistPop.csv">nycHistPop.csv</a> 
				</ul>
			<li> 2018-2019 Daily Attendance:
				<ul>
					<li> Hosted at NYC OpenData: <a href="https://data.cityofnewyork.us/Education/2018-2019-Daily-Attendance/x3bb-kg5j">https://data.cityofnewyork.us/Education/2018-2019-Daily-Attendance/x3bb-kg5j</a>
					<li> <a href="https://github.com/stjohn/csci127/blob/master/dailyAttendanceManHunt2018.csv">Filtered data set</a> (for <a href="http://www.mhshs.org/hunter-college.html">Manhattan Hunter HS</a>)
				</ul>
			<li> Homeless Shelter:  <i>Did not have time to cover in slides, but included below for extra challenges:</i>
				<ul>
					<li> Go to: NYC OpenData: <a href="https://data.cityofnewyork.us/Social-Services/DHS-Daily-Report/k46n-sa2m">https://data.cityofnewyork.us/Social-Services/DHS-Daily-Report/k46n-sa2m</a>
					<li>
					Click on the "Explore Data/View Data" button.  To keep the data set from being very large (and avoid some missing values in 2014), we are going filter the data to be all counts after January 1, 2018.  To do this:
<ul>
	<li> Click on the "Filter" button.
	<li> On the menu that pops us, click on "Add a New Filter Condition".
	<li> Choose "Date of Census" but change the "is" to be "is after".
	<li> Click in the box below and a calendar will pop up.  Highlight January 1, 2018.
	<li> Click the check box to the left of the data.
	<li> It will take a few seconds (it's a large file) but the rows on the left
	will be filtered to be all counts after January 1, 2018.
</ul>
To download the file,
<ul>
	<li> Click on the "Export" button.
	<li> Under "Download", choose "CSV".
	<li> The download will begin automatically (files are usually stored in "Downloads" folder).
</ul>

				</ul>

			<li> Parking Tickets:
				<ul>
					<li> Hosted at NYC OpenData: <a  href="https://data.cityofnewyork.us/City-Government/Parking-Violations-Issued-Fiscal-Year-2020/pvqr-7yc4/data">https://data.cityofnewyork.us/City-Government/Parking-Violations-Issued-Fiscal-Year-2020/pvqr-7yc4/data</a>
					<li> Small sample file to work with:  <a href= "../../teaching/csci127/f17/tickets.csv">tickets.csv</a>
					<li> To download data for a given neighborhood (and restricted to just a single month or year, since the data sets can be quite large):
			<ul>
				<li> Instead of neighborhood name or zipcode, parking tickets are classified by the police precinct that issued the ticket.  First, figure out the precinct (here's a <a href="http://www1.nyc.gov/site/nypd/bureaus/patrol/find-your-precinct.page">useful tool</a>).
				<li> Download the data set as a CSV, filtering by "Violation Precinct".  For example, Hunter College is located in the 19th Precinct, so, you would enter <tt>19</tt> on the filter.

</ul>

				</ul>
			<li> 311 Calls:  <i>Did not have time to cover in slides, but included below for extra challenges:</i>
				<ul>
					<li> Hosted at NYC Open Data: <a href=https://data.cityofnewyork.us/Social-Services/311-Service-Requests-from-2010-to-Present/erm2-nwe9/data">https://data.cityofnewyork.us/Social-Services/311-Service-Requests-from-2010-to-Present/erm2-nwe9/data</a>

				</ul>					
		</ul>
<!--		
	<li> <b>References:</b>
		<ul>
			<li> LINK
			<li> LINK
		</ul>
-->
</ul>


</div>

<div>
<h2>Session 3: Mapping City Data (Using Objects & Mapping Coordinates)</h2>
<h3> Wednesday, 11 December 2019</h3>

<p><img src="collisions18Oct2016.png" width = "50%">

<p>Our opening challenge is: where do collisions occur?  For this last session, we focus on mapping GIS coordinates.  We begin with a review latitude and longitude and mapping NYC landmarks with turtle graphics.  We then introduce the folium package (a Python wrapper for leaflet.js) that makes interactive maps that be viewed in a browser (like google maps).  We then move onto collisions, and work through filtering the data, and plotting collisions by GIS locations and color coding by vehicles involved (did it involve a taxi?  a commercial vehicle?) and time.  Our follow-up questions involve transferring these mapping techniques to other open NYC data sets.

<ul>
	<li> <b>Slides:</b> <i>(will be uploaded on 12/11)</i>
	<li> <b>Concepts covered:</b>  Using objects (instantiating and altering attributes), traversing data from files, review of coordinate systems and latitude and longitude.   
	<li> <b>Packages used:</b>  
	turtle, pandas, & folium.  turtle is part of every Python distribution; 
	<a href="https://pandas.pydata.org">pandas</a> is included in the freely-distributed <a href="https://www.anaconda.com/distribution/">anaconda</a> release of Python.	
	<a href="https://pypi.org/project/folium/">folium</a>, a Python-wrapper for leaflet.js, is freely available.

	
	<li> <b>Data used:</b>  Locations of CUNY campuses, NYC libraries, and NYC collision data (all from NY State or NYC open data projects).
	<!--
		<ul>
			<li> 
			<li> Cleaned dataset:
		</ul>
		
	
	<li> <b>References:</b>
		<ul>
			<li> LINK
			<li> LINK
		</ul>
		
	-->
</ul>



</div>



</html>